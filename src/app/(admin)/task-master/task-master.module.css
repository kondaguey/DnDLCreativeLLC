@reference "../../../app/globals.css";

/* --- LAYOUT & ATMOSPHERE --- */
.pageWrapper {
  /* Fix 1: Use 100dvh for mobile browsers */
  @apply min-h-[100dvh] w-full flex flex-col relative overflow-hidden;
  background-color: var(--color-bg);

  /* Fix 2: INCREASED TOP PADDING (pt-14) to clear mobile status bars/notches */
  @apply pt-14 px-4 pb-20;

  /* Desktop overrides: Standard padding, lock height */
  @apply md:p-6 md:h-screen md:overflow-hidden;
}

.atmosphereBlob {
  position: absolute;
  border-radius: 9999px;
  filter: blur(8rem);
  pointer-events: none;
  opacity: 0.15;
  z-index: 0;
}

.blobPrimary {
  background-color: var(--color-brand-mid);
  top: -10%;
  left: -10%;
  width: 40rem;
  height: 40rem;
}

.blobSecondary {
  background-color: var(--color-brand-end);
  bottom: -10%;
  right: -10%;
  width: 50rem;
  height: 50rem;
}

/* --- GRID LAYOUT -> FLEX LAYOUT --- */
.container {
  /* Changed from grid to flex to support dynamic sidebar width without overlap */
  @apply max-w-[1920px] w-full mx-auto relative z-10 flex flex-col lg:flex-row gap-4 lg:gap-6 h-full;
}

/* --- SIDEBAR NAV (Left Col) --- */
.sidebar {
  /* Removed col-span-2 */
  @apply hidden lg:flex flex-col gap-4 overflow-y-auto pr-2 pb-10;
}

.navButton {
  @apply flex items-center gap-3 p-3 md:p-4 rounded-xl border transition-all duration-300 w-full text-left;
  background: rgba(255, 255, 255, 0.03);
  border-color: rgba(255, 255, 255, 0.08);
  color: var(--color-text-main);
}

.navButton:hover {
  @apply bg-white/5 border-purple-500/30 translate-x-1;
}

.navButtonActive {
  @apply bg-purple-500/10 border-purple-500/50 text-purple-300;
  box-shadow: 0 0 20px rgba(168, 85, 247, 0.1);
}

/* --- MAIN WORKSPACE (Center Col) --- */
.workspace {
  /* Replaced col-span-10 with flex-1 w-full min-w-0 to handle flex items properly */
  @apply flex-1 w-full min-w-0 flex flex-col gap-3 lg:gap-4 h-full overflow-hidden;
}

/* --- HEADER --- */
.header {
  @apply flex flex-col md:flex-row md:justify-between md:items-end gap-3 md:gap-4 pb-3 md:pb-4 border-b border-white/10 shrink-0;
}

.headerTitleBlock {
  @apply w-full md:w-auto;
}

.headerForm {
  @apply flex gap-2 w-full md:max-w-md items-stretch md:items-end;
}

.title {
  /* Tablet (md/lg): 3xl. Desktop (2xl): 5xl. */
  @apply text-3xl xl:text-5xl font-black uppercase tracking-tight;
  /* Fix 3: Relaxed line-height and added vertical padding to prevent font clipping */
  @apply leading-normal py-1;
  @apply text-transparent bg-clip-text bg-gradient-to-r from-purple-300 to-indigo-300;
}

.subtitle {
  @apply text-[10px] md:text-xs font-bold uppercase tracking-[0.2em] text-slate-500 mb-1 md:mt-2;
}

/* --- CONTENT PANEL --- */
.panel {
  @apply flex-grow overflow-y-auto rounded-xl md:rounded-[2rem] border relative;
  /* Tablet: Smaller padding (p-4). Desktop: Larger (p-6) */
  @apply p-4 xl:p-6;
  background: rgba(255, 255, 255, 0.02);
  border-color: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
}

/* --- ITEM CARDS --- */
.itemCard {
  @apply p-3 md:p-4 mb-3 rounded-xl border border-white/5 bg-white/5 transition-all flex items-start gap-3 md:gap-4;
}

.itemCard:hover {
  @apply border-purple-500/30 bg-white/10;
}

/* Checkbox */
.checkbox {
  @apply w-5 h-5 md:w-6 md:h-6 rounded md:rounded-md border-2 border-slate-600 flex items-center justify-center cursor-pointer transition-colors mt-0.5;
}

.checkboxChecked {
  @apply bg-purple-500 border-purple-500;
}

/* Tags */
.tag {
  @apply px-2 py-0.5 rounded-full text-[10px] uppercase tracking-wider font-bold border;
}

/* Code Editor overrides */
.codeBlock {
  @apply font-mono text-xs md:text-sm bg-slate-950/50 p-3 md:p-4 rounded-lg border border-white/10 text-emerald-400 w-full overflow-x-auto;
}

/* task-master.module.css */

.sidebar {
  /* Base styles for the sidebar container */
  height: 100vh;
  position: sticky;
  top: 0;

  /* NEW: Prevents the parent shell from arbitrarily cutting the sidebar off */
  flex-shrink: 0;

  transition:
    width 0.3s cubic-bezier(0.4, 0, 0.2, 1),
    padding 0.3s ease;
  overflow-y: auto;
  overflow-x: hidden;
  border-right: 1px solid rgba(255, 255, 255, 0.05);
  background-color: rgba(15, 23, 42, 0.8);
  /* Slate 900 with transparency */
  backdrop-filter: blur(12px);
}

/* --- UPDATED: Slimmer Expanded Mode --- */
.expanded {
  /* Tablet: 220px to save space. Desktop: 260px */
  width: 220px;
  padding: 1.5rem 0.75rem;
  /* Tightened horizontal padding */
}

@media (min-width: 1536px) {
  .expanded {
    width: 280px;
    padding: 1.5rem 1rem;
  }
}

/* --- UPDATED: Slimmer Collapsed Mode --- */
.collapsed {
  width: 80px;
  /* Reduced from 88px */
  padding: 1.5rem 0.5rem;
}

/* Scrollbar styling for the sidebar */
.sidebar::-webkit-scrollbar {
  width: 3px;
}

.sidebar::-webkit-scrollbar-track {
  background: transparent;
}

.sidebar::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
}

.sidebar::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.2);
}